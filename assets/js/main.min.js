$(document).ready(function(){function e(){var e=new Date,n=new Date(2016,5,10),a=t(e,n),s=1==a?" day ":" days ";return a>0?"Only "+a+s+"left!":"They're married!"}function t(e,t){return Math.floor((t-e)/864e5)}$("#menuToggle").click(function(){$("body").toggleClass("show-nav")}),$(".nav-item").click(function(){$("body").removeClass("show-nav")}),$("#countdown").html(e())}),$(document).ready(function(){function e(e){$("#loading_rsvp_data").show();var n=Parse.Object.extend("Reservation"),a=new Parse.Query(n);a.equalTo("rsvp_code",e),a.find({success:function(e){$("#loading_rsvp_data").hide(),0==e.length?($("#error_message").show(),$("#code_group").show()):t(e)},error:function(e){$("#loading_rsvp_data").hide(),$("#error_message").show(),$("#code_group").show()}})}function t(e){i=e;for(var t=0;t<e.length;t++){var a=e[t],s={first_name:a.get("first_name"),last_name:a.get("last_name"),responded:a.get("responded"),attending:a.get("attending"),gets_guest:a.get("gets_guest"),guest_name:a.get("guest_name"),guest_attending:a.get("guest_attending"),objectId:a.id},d='<h3 class="title">'+s.first_name+" "+s.last_name+"</h3>";1==s.responded&&(d+='<div class="alert-box alert-info"><strong>Heads up!</strong> It looks like your RSVP has already been submitted. You can update your reservation if your response has changed, or if you feel like submitting it again.<span class="dismiss-alert"><i class="fa fa-times"></i></span></div>'),d+='<fieldset id="'+s.objectId+'" class="my-md"><div class="radio"><label><input type="radio" name="'+s.objectId+'_attendance" id="'+s.objectId+'_attendanceRadio1" value="true" checked>I wouldn\'t miss it!</label></div><div class="radio"><label><input type="radio" name="'+s.objectId+'_attendance" id="'+s.objectId+'_attendanceRadio2" value="false">Unfortunately cannot make it</label></div>',1==s.gets_guest&&(d+='<p>Will you be bringing a guest?</p><div class="radio"><label><input type="radio" name="'+s.objectId+'_guest_attendance" id="'+s.objectId+'_guestAttendanceRadio1" value="true" checked>Yes, I am bringing a guest</label></div><div class="radio"><label><input type="radio" name="'+s.objectId+'_guest_attendance" id="'+s.objectId+'_guestAttendanceRadio2" value="false">No, it will just be me</label></div><div class="form-group"><label>Guest name</label><input type="text" id="'+s.objectId+'_guest_name" class="form-control" placeholder="First and last name">'),d+="</fieldset>",$("#guest_info").append(d)}n()}function n(){$("#guest_info").append('<button class="btn" id="submit_rsvp">Submit</button>')}function a(){$("#guest_info").hide(),$("#loading_rsvp_data").show();for(var e=!1,t=0;t<i.length;t++){var n=s(i[t]),a=Parse.Object.extend("Reservation"),d=new a;d.id=n.objectId,d.set("responded",n.responded),d.set("attending",n.attending),d.set("guest_attending",n.guest_attending),d.set("guest_name",n.guest_name),d.save(null,{success:function(e){},error:function(t,n){e=!0}})}$("#loading_rsvp_data").hide(),1==e?$("#error_submitting").show():($("#success_message").show(),$("#rsvp_code").val(""),$("#code_group").show())}function s(e){var t={first_name:e.get("first_name"),last_name:e.get("last_name"),responded:!0,gets_guest:e.get("gets_guest"),guest_name:"",guest_attending:!1,objectId:e.id};return t.attending="true"==$('input[name="'+t.objectId+'_attendance"]:checked').val()?!0:!1,1==t.gets_guest&&(t.guest_attending="true"==$('input[name="'+t.objectId+'_guest_attendance"]:checked').val()?!0:!1,t.guest_name=$("#"+t.objectId+"_guest_name").val()),t}Parse.initialize("esgwG6h6b8YLjQiri6Hm1srCP0xuVtxUKWVQcFpK","OtnuwfSEMtOsfAVlpzKQVlhzUlv5ZKgNZ2H7eNS1");var i=[];$("#submit_code").click(function(){e($("#rsvp_code").val()),$("#code_group").hide()}),$("#guest_info").on("click","#submit_rsvp",function(){a()}),$("#guest_info").on("click",".dismiss-alert",function(){$(this).parent().hide()}),$(".dismiss-alert").click(function(){$(this).parent().hide()})});